<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Sign-up Form</title>
  </head>
  <body>
    <div class="container">
      <aside class="aside">
        <div class="logo">
          <img
            src="./img/logo.png"
            alt="The Odin Project logo"
            class="logo__image"
          />
          <span class="logo__title">ODIN</span>
        </div>

        <footer class="footer">
          <small class="text text_small text_light">
            Background photo by
            <a
              href="https://unsplash.com/@haliewestphoto"
              class="link link_light"
              target="_blank"
              rel="noreferrer"
            >
              Halie West
            </a>
            on
            <a
              href="https://unsplash.com"
              class="link link_light"
              target="_blank"
              rel="noreferrer"
            >
              Unsplash
            </a>

            <br />

            Logo image from
            <a
              href="https://theodinproject.com"
              class="link link_light"
              target="_blank"
              rel="noreferrer"
            >
              The Odin Project
            </a>
          </small>
        </footer>
      </aside>

      <main class="main">
        <div class="main__top">
          <p class="text text_large text_dark">
            This is not a real online service! You know you need something like
            this in your life to help you realize your deepest dreams. Sign up
            <em>now</em> to get started.
          </p>
          <p class="text text_large text_dark">
            You <em>know</em> you want to.
          </p>
        </div>

        <div class="main__mid">
          <p class="text text_large text_dark">Let's do this!</p>
          <form action="#" method="POST" id="form" class="form" novalidate>
            <label for="firstName" class="label">
              FIRST NAME
              <input
                type="text"
                id="firstName"
                name="firstName"
                class="input"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>

            <label for="lastName" class="label">
              LAST NAME
              <input
                type="text"
                id="lastName"
                name="lastName"
                class="input"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>

            <label for="email" class="label">
              EMAIL
              <input
                type="email"
                id="email"
                name="email"
                class="input"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>

            <label for="phone" class="label">
              PHONE NUMBER
              <input
                type="tel"
                id="phone"
                name="phone"
                class="input"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>

            <label for="password" class="label">
              PASSWORD
              <input
                type="password"
                id="password"
                name="password"
                class="input"
                minlength="8"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>

            <label for="confirm" class="label">
              CONFIRM PASSWORD
              <input
                type="password"
                id="confirm"
                name="confirm"
                class="input"
                required
              />
              <span class="label__hint">err placeholder</span>
            </label>
          </form>
        </div>

        <div class="main__bot">
          <button type="submit" form="form" class="button">
            Create Account
          </button>
          <p class="text text_dark">
            Already have an account?
            <a href="#" class="link link_dark">Log in</a>
          </p>
        </div>
      </main>
    </div>
  </body>

  <script>
    const form = document.querySelector(".form");
    const inputs = {};
    [
      inputs.firstName,
      inputs.lastName,
      inputs.email,
      inputs.phone,
      inputs.password,
      inputs.confirm,
    ] = form.querySelectorAll(".input");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      let invalidInput;

      Object.keys(inputs).forEach((key) => {
        const inp = inputs[key];
        const hint = inp.nextElementSibling;

        if (!inp.validity.valid) {
          inp.classList.add("input_invalid");
          hint.style.visibility = "visible";
          hint.textContent = "* " + inp.validationMessage;
          if (!invalidInput) invalidInput = inp;
        } else if (key === "confirm" && inp.value !== inputs.password.value) {
          const passwordHint = inputs.password.nextElementSibling;

          inp.classList.add("input_invalid");
          inputs.password.classList.add("input_invalid");
          hint.style.visibility = "hidden";
          passwordHint.style.visibility = "visible";
          passwordHint.textContent = "* Passwords don't match";
          if (!invalidInput) invalidInput = inputs.password;
        } else {
          inp.classList.remove("input_invalid");
          hint.style.visibility = "hidden";
        }
      });

      if (invalidInput) invalidInput.focus();
    });
  </script>
</html>
